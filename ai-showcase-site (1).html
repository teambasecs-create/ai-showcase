<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI活用事例ショーケース | 組織別実装マップ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #1E40AF;
            --primary-light: #3B82F6;
            --accent: #06B6D4;
            --success: #10B981;
            --warning: #F59E0B;
            --danger: #EF4444;
            --dark: #1F2937;
            --light: #F9FAFB;
            --glass: rgba(255, 255, 255, 0.1);
            --glass-border: rgba(255, 255, 255, 0.2);
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: var(--dark);
            overflow-x: auto;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 3rem;
            animation: fadeInDown 0.8s ease;
        }

        .header h1 {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.95;
        }

        .org-chart {
            background: var(--glass);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            border: 1px solid var(--glass-border);
            padding: 2rem;
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
            animation: fadeIn 1s ease;
            overflow-x: auto;
        }

        .tree {
            display: flex;
            align-items: center;
            position: relative;
            padding: 20px;
        }

        .node {
            display: flex;
            align-items: center;
            position: relative;
        }

        .node-content {
            background: white;
            border-radius: 12px;
            padding: 1rem 1.5rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 150px;
            text-align: center;
            position: relative;
        }

        .node-content:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 12px rgba(0, 0, 0, 0.15);
        }

        .node-title {
            font-weight: 600;
            font-size: 1rem;
            color: var(--dark);
            margin-bottom: 0.25rem;
        }

        .node-subtitle {
            font-size: 0.85rem;
            color: #6B7280;
        }

        .node-icon {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
        }

        .children {
            display: flex;
            flex-direction: column;
            margin-left: 3rem;
            position: relative;
        }

        .children::before {
            content: '';
            position: absolute;
            left: -2rem;
            top: 0;
            bottom: 0;
            width: 1px;
            background: var(--glass-border);
        }

        .child-node {
            position: relative;
            margin: 1rem 0;
        }

        .child-node::before {
            content: '';
            position: absolute;
            left: -2rem;
            top: 50%;
            width: 2rem;
            height: 1px;
            background: var(--glass-border);
        }

        .departments {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            margin-left: 2rem;
        }

        .department {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 12px;
            padding: 1rem;
            border-left: 3px solid var(--accent);
        }

        .department-name {
            font-weight: 600;
            color: var(--primary);
            margin-bottom: 0.75rem;
            font-size: 0.95rem;
        }

        .tools {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .tool-chip {
            background: linear-gradient(135deg, var(--primary-light), var(--accent));
            color: white;
            padding: 0.4rem 0.8rem;
            border-radius: 20px;
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .tool-chip::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.5);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .tool-chip:hover::before {
            width: 100px;
            height: 100px;
        }

        .tool-chip:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .status-badge {
            display: inline-block;
            padding: 0.2rem 0.5rem;
            border-radius: 12px;
            font-size: 0.7rem;
            font-weight: 600;
            margin-left: 0.5rem;
        }

        .status-production {
            background: var(--success);
            color: white;
        }

        .status-development {
            background: var(--warning);
            color: white;
        }

        .status-planning {
            background: var(--danger);
            color: white;
        }

        /* モーダル */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(5px);
            z-index: 1000;
            animation: fadeIn 0.3s ease;
        }

        .modal.show {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: white;
            border-radius: 20px;
            padding: 2rem;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            animation: slideUp 0.4s ease;
            position: relative;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 1.5rem;
        }

        .modal-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary);
            flex: 1;
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #6B7280;
            transition: all 0.3s ease;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-close:hover {
            background: var(--light);
            transform: rotate(90deg);
        }

        .modal-body {
            color: var(--dark);
        }

        .modal-description {
            margin-bottom: 1.5rem;
            line-height: 1.6;
        }

        .modal-section {
            margin-bottom: 1.5rem;
        }

        .modal-section h3 {
            font-size: 1rem;
            font-weight: 600;
            color: var(--primary);
            margin-bottom: 0.75rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .links-container {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .link-button {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1.25rem;
            background: linear-gradient(135deg, var(--primary-light), var(--accent));
            color: white;
            text-decoration: none;
            border-radius: 10px;
            transition: all 0.3s ease;
            font-size: 0.95rem;
        }

        .link-button:hover {
            transform: translateX(5px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }

        .link-button-demo {
            background: linear-gradient(135deg, #EF4444, #F59E0B);
            font-size: 1.1rem;
            padding: 1rem 1.5rem;
            margin-bottom: 0.75rem;
            justify-content: space-between;
            box-shadow: 0 4px 12px rgba(239, 68, 68, 0.3);
        }

        .link-button-demo:hover {
            transform: scale(1.02) translateX(5px);
            box-shadow: 0 6px 20px rgba(239, 68, 68, 0.4);
        }

        .link-icon {
            font-size: 1.2rem;
        }

        .tags {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-top: 0.5rem;
        }

        .tag {
            background: var(--light);
            color: var(--dark);
            padding: 0.3rem 0.7rem;
            border-radius: 15px;
            font-size: 0.85rem;
        }

        .impact-box {
            background: linear-gradient(135deg, #10B981, #06B6D4);
            color: white;
            padding: 1rem;
            border-radius: 10px;
            margin-top: 0.75rem;
            text-align: center;
            font-weight: 600;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .loading {
            text-align: center;
            padding: 3rem;
            color: white;
            font-size: 1.2rem;
        }

        .error-message {
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid var(--danger);
            color: var(--danger);
            padding: 1rem;
            border-radius: 10px;
            margin: 1rem 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🚀 AI活用事例ショーケース</h1>
            <p>組織階層別・生成AIツール実装マップ</p>
        </div>

        <div class="org-chart" id="orgChart">
            <div class="loading">データを読み込んでいます...</div>
        </div>
    </div>

    <!-- モーダル -->
    <div class="modal" id="toolModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="modalTitle">ツール名</h2>
                <button class="modal-close" onclick="closeModal()">×</button>
            </div>
            <div class="modal-body" id="modalBody">
                <!-- 動的にコンテンツを挿入 -->
            </div>
        </div>
    </div>

    <script>
        // グローバル変数
        let organizationData = null;

        // ダミーデータ（data.jsonが読み込めない場合のフォールバック）
        const fallbackData = {
            organization: {
                name: "代表取締役",
                icon: "👔",
                children: [
                    {
                        name: "管理本部",
                        icon: "📋",
                        departments: [
                            {
                                name: "人事",
                                tools: [
                                    {
                                        id: "hr-001",
                                        name: "採用業務自動化AIツール",
                                        shortDesc: "応募者スクリーニングから面接日程調整まで自動化",
                                        fullDesc: "AIを活用して応募者の書類選考、適性判定、面接日程の自動調整まで一貫して自動化。採用業務の効率を大幅に向上させます。",
                                        status: "production",
                                        impact: "採用工数70%削減",
                                        links: {
                                            demo: "https://youtu.be/demo1",
                                            tool: "https://docs.google.com/spreadsheets/d/1HYHC-8Ue__67IEYwtm7nHUbWCEG4q5KAGkDVZxp3LzY/edit?usp=sharing"
                                        },
                                        tags: ["自動化", "効率化", "採用"]
                                    },
                                    {
                                        id: "hr-002",
                                        name: "社内FAQチャットボット",
                                        shortDesc: "よくある質問に24時間自動対応",
                                        status: "development",
                                        impact: "問い合わせ対応時間50%削減",
                                        tags: ["チャットボット", "FAQ"]
                                    },
                                    {
                                        id: "hr-003",
                                        name: "勤怠・給与計算支援ツール",
                                        shortDesc: "勤怠データから給与計算まで自動化",
                                        status: "development",
                                        tags: ["給与計算", "勤怠管理"]
                                    }
                                ]
                            },
                            {
                                name: "経理",
                                tools: [
                                    {
                                        id: "acc-001",
                                        name: "請求書自動処理AI",
                                        shortDesc: "請求書の読み取りから仕訳まで自動化",
                                        status: "development",
                                        tags: ["OCR", "自動化"]
                                    }
                                ]
                            }
                        ]
                    },
                    {
                        name: "営業本部",
                        icon: "💼",
                        departments: [
                            {
                                name: "営業",
                                tools: [
                                    {
                                        id: "sales-001",
                                        name: "提案資料自動生成AI",
                                        shortDesc: "顧客に合わせた提案書を自動生成",
                                        fullDesc: "ヒアリング内容からROI試算、資料作成まで一貫して自動化。営業の提案準備時間を大幅に削減します。",
                                        status: "production",
                                        impact: "資料作成時間80%削減",
                                        links: {
                                            demo: "https://youtu.be/demo_sales",
                                            genspark: [
                                                {name: "ヒアリング項目抽出bot", url: "https://www.genspark.ai/agents?agent_id=de17d754-ae31-44b9-ba2a-4b45f9bd636a"},
                                                {name: "ROI試算bot", url: "https://www.genspark.ai/agents?agent_id=cc0491f2-f706-4754-847c-322a1471bea4"},
                                                {name: "資料自動生成bot", url: "https://www.genspark.ai/agents?agent_id=6e199ada-693e-477e-970a-e308bc897339"}
                                            ]
                                        },
                                        tags: ["自動生成", "提案書", "営業支援"]
                                    },
                                    {
                                        id: "sales-002",
                                        name: "商談議事録自動生成AI",
                                        shortDesc: "商談内容を自動で文字起こし・要約",
                                        fullDesc: "ailead等のツールを活用し、商談の音声を自動で文字起こし、重要ポイントを抽出して構造化された議事録を生成。次回アクションアイテムも自動抽出します。",
                                        status: "development",
                                        impact: "議事録作成時間90%削減",
                                        links: {
                                            demo: "https://youtu.be/demo_sales_minutes"
                                        },
                                        tags: ["文字起こし", "要約", "ailead"]
                                    }
                                ]
                            }
                        ]
                    },
                    {
                        name: "製造本部",
                        icon: "🏭",
                        departments: [
                            {
                                name: "製造",
                                tools: [
                                    {
                                        id: "mfg-001",
                                        name: "設計ドキュメント自動生成AI",
                                        shortDesc: "技術仕様書を自動作成",
                                        fullDesc: "製品の設計情報から技術仕様書、マニュアル、保守ドキュメントを自動生成。ドキュメント作成の負担を軽減します。",
                                        status: "production",
                                        impact: "ドキュメント作成時間75%削減",
                                        links: {
                                            demo: "https://youtu.be/demo_mfg",
                                            tool: "https://script.google.com/a/macros/team.addness.co.jp/s/AKfycbzI2CslFKl-O2u4Q3Drj7HpaHrxFcURNKuNvIELwKfbEW5BgwSlBK--58vWUB5YdT1BRg/exec"
                                        },
                                        tags: ["ドキュメント生成", "製造"]
                                    },
                                    {
                                        id: "mfg-002",
                                        name: "ベテラン技術ナレッジベースAI",
                                        shortDesc: "熟練技術者のノウハウをAI化",
                                        status: "development",
                                        tags: ["ナレッジ管理", "技術継承"]
                                    },
                                    {
                                        id: "mfg-003",
                                        name: "品質不良原因分析AI",
                                        shortDesc: "不良品の原因を自動分析",
                                        status: "development",
                                        tags: ["品質管理", "分析"]
                                    }
                                ]
                            }
                        ]
                    },
                    {
                        name: "カスタマーサクセス本部",
                        icon: "🎯",
                        departments: [
                            {
                                name: "カスタマーサクセス",
                                tools: [
                                    {
                                        id: "cs-001",
                                        name: "AI自動返信メール生成システム",
                                        shortDesc: "顧客問い合わせへの返信を自動生成",
                                        fullDesc: "顧客からの問い合わせメールを分析し、過去の対応履歴と製品情報を基に最適な返信文を自動生成。担当者は確認・微調整のみで送信可能です。",
                                        status: "production",
                                        impact: "返信作成時間70%削減",
                                        links: {
                                            demo: "https://youtu.be/demo_cs",
                                            tool: "https://app.slack.com/client/T09LLPWU8F7/C09MELEK02Y",
                                            artifact: "https://claude.ai/public/artifacts/0d2537c8-6269-4e22-a3ba-adf0622aeb26"
                                        },
                                        tags: ["メール自動化", "カスタマーサポート"]
                                    },
                                    {
                                        id: "cs-002",
                                        name: "VoC（顧客の声）AI分析システム",
                                        shortDesc: "顧客フィードバックを自動分析・分類",
                                        status: "development",
                                        impact: "分析時間85%削減",
                                        tags: ["VoC分析", "感情分析"]
                                    },
                                    {
                                        id: "cs-003",
                                        name: "議事録自動作成＆要約システム",
                                        shortDesc: "顧客MTGの議事録を自動生成",
                                        status: "development",
                                        impact: "議事録作成時間90%削減",
                                        tags: ["議事録", "要約", "顧客対応"]
                                    }
                                ]
                            }
                        ]
                    }
                ]
            }
        };

        // 初期化
        async function init() {
            try {
                // 実際の環境では data.json を fetch で読み込む
                // const response = await fetch('./data.json');
                // organizationData = await response.json();
                
                // デモ用にフォールバックデータを使用
                organizationData = fallbackData;
                renderOrganization();
            } catch (error) {
                console.error('データ読み込みエラー:', error);
                // エラーが起きてもフォールバックデータで動作
                organizationData = fallbackData;
                renderOrganization();
            }
        }

        // 組織図のレンダリング
        function renderOrganization() {
            const chartContainer = document.getElementById('orgChart');
            chartContainer.innerHTML = '';
            
            const tree = createTreeNode(organizationData.organization);
            chartContainer.appendChild(tree);
        }

        // ツリーノードの作成
        function createTreeNode(node) {
            const nodeElement = document.createElement('div');
            nodeElement.className = 'tree';
            
            // ルートノード
            const nodeContent = document.createElement('div');
            nodeContent.className = 'node';
            
            const content = document.createElement('div');
            content.className = 'node-content';
            content.innerHTML = `
                <div class="node-icon">${node.icon || '📊'}</div>
                <div class="node-title">${node.name}</div>
            `;
            
            nodeContent.appendChild(content);
            nodeElement.appendChild(nodeContent);
            
            // 子ノード（各本部）
            if (node.children && node.children.length > 0) {
                const childrenContainer = document.createElement('div');
                childrenContainer.className = 'children';
                
                node.children.forEach(child => {
                    const childNode = document.createElement('div');
                    childNode.className = 'child-node';
                    
                    const childContent = document.createElement('div');
                    childContent.className = 'node-content';
                    childContent.style.background = 'linear-gradient(135deg, #667eea, #764ba2)';
                    childContent.style.color = 'white';
                    childContent.innerHTML = `
                        <div class="node-icon">${child.icon || '📁'}</div>
                        <div class="node-title">${child.name}</div>
                    `;
                    
                    childNode.appendChild(childContent);
                    
                    // 部門とツール
                    if (child.departments && child.departments.length > 0) {
                        const deptContainer = document.createElement('div');
                        deptContainer.className = 'departments';
                        
                        child.departments.forEach(dept => {
                            // ツールがある部門のみ表示
                            if (dept.tools && dept.tools.length > 0) {
                                const deptElement = document.createElement('div');
                                deptElement.className = 'department';
                                
                                let deptHTML = `<div class="department-name">📌 ${dept.name}</div>`;
                                
                                deptHTML += '<div class="tools">';
                                dept.tools.forEach(tool => {
                                    const statusClass = getStatusClass(tool.status);
                                    const statusText = getStatusText(tool.status);
                                    deptHTML += `
                                        <div class="tool-chip" onclick="openToolModal('${tool.id}')">
                                            ${tool.name}
                                            <span class="status-badge ${statusClass}">${statusText}</span>
                                        </div>
                                    `;
                                });
                                deptHTML += '</div>';
                                
                                deptElement.innerHTML = deptHTML;
                                deptContainer.appendChild(deptElement);
                            }
                        });
                        
                        childNode.appendChild(deptContainer);
                    }
                    
                    childrenContainer.appendChild(childNode);
                });
                
                nodeElement.appendChild(childrenContainer);
            }
            
            return nodeElement;
        }

        // ステータスのクラス取得
        function getStatusClass(status) {
            const statusMap = {
                'production': 'status-production',
                'development': 'status-development',
                'planning': 'status-planning'
            };
            return statusMap[status] || 'status-planning';
        }

        // ステータスのテキスト取得
        function getStatusText(status) {
            const statusMap = {
                'production': '運用中',
                'development': '開発中',
                'planning': '構想中'
            };
            return statusMap[status] || '構想中';
        }

        // ツールのモーダルを開く
        function openToolModal(toolId) {
            const tool = findToolById(toolId);
            if (!tool) {
                console.error('ツールが見つかりません:', toolId);
                return;
            }
            
            const modal = document.getElementById('toolModal');
            const modalTitle = document.getElementById('modalTitle');
            const modalBody = document.getElementById('modalBody');
            
            modalTitle.textContent = tool.name;
            
            let bodyHTML = '';
            
            // 説明
            if (tool.fullDesc || tool.shortDesc) {
                bodyHTML += `
                    <div class="modal-description">
                        ${tool.fullDesc || tool.shortDesc}
                    </div>
                `;
            }
            
            // インパクト
            if (tool.impact) {
                bodyHTML += `
                    <div class="impact-box">
                        🎯 ${tool.impact}
                    </div>
                `;
            }
            
            // リンク
            if (tool.links) {
                bodyHTML += '<div class="modal-section">';
                bodyHTML += '<h3>🔗 関連リンク</h3>';
                bodyHTML += '<div class="links-container">';
                
                // デモを最優先で表示（大きく、目立つように）
                if (tool.links.demo) {
                    bodyHTML += `
                        <a href="${tool.links.demo}" target="_blank" class="link-button link-button-demo">
                            <span class="link-icon">🎬</span>
                            <strong>デモ動画を見る</strong>
                            <span style="margin-left: auto;">→</span>
                        </a>
                    `;
                }
                
                if (tool.links.tool) {
                    bodyHTML += `
                        <a href="${tool.links.tool}" target="_blank" class="link-button">
                            <span class="link-icon">🔧</span>
                            ツールを開く
                        </a>
                    `;
                }
                
                if (tool.links.prototype) {
                    bodyHTML += `
                        <a href="${tool.links.prototype}" target="_blank" class="link-button">
                            <span class="link-icon">🚀</span>
                            プロトタイプ
                        </a>
                    `;
                }
                
                if (tool.links.artifact) {
                    bodyHTML += `
                        <a href="${tool.links.artifact}" target="_blank" class="link-button">
                            <span class="link-icon">💎</span>
                            Claude Artifact
                        </a>
                    `;
                }
                
                if (tool.links.document) {
                    bodyHTML += `
                        <a href="${tool.links.document}" target="_blank" class="link-button">
                            <span class="link-icon">📄</span>
                            ドキュメント
                        </a>
                    `;
                }
                
                if (tool.links.genspark && Array.isArray(tool.links.genspark)) {
                    tool.links.genspark.forEach(link => {
                        bodyHTML += `
                            <a href="${link.url}" target="_blank" class="link-button">
                                <span class="link-icon">🤖</span>
                                ${link.name}
                            </a>
                        `;
                    });
                }
                
                bodyHTML += '</div></div>';
            }
            
            // タグ
            if (tool.tags && tool.tags.length > 0) {
                bodyHTML += '<div class="modal-section">';
                bodyHTML += '<h3>🏷️ タグ</h3>';
                bodyHTML += '<div class="tags">';
                tool.tags.forEach(tag => {
                    bodyHTML += `<span class="tag">${tag}</span>`;
                });
                bodyHTML += '</div></div>';
            }
            
            modalBody.innerHTML = bodyHTML;
            modal.classList.add('show');
        }

        // ツールIDで検索
        function findToolById(toolId) {
            if (!organizationData) return null;
            
            for (const child of organizationData.organization.children) {
                if (child.departments) {
                    for (const dept of child.departments) {
                        if (dept.tools) {
                            const tool = dept.tools.find(t => t.id === toolId);
                            if (tool) return tool;
                        }
                    }
                }
            }
            return null;
        }

        // モーダルを閉じる
        function closeModal() {
            const modal = document.getElementById('toolModal');
            modal.classList.remove('show');
        }

        // モーダル外クリックで閉じる
        window.onclick = function(event) {
            const modal = document.getElementById('toolModal');
            if (event.target === modal) {
                closeModal();
            }
        }

        // ESCキーでモーダルを閉じる
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') {
                closeModal();
            }
        });

        // ページ読み込み時に初期化
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>